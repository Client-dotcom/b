-- MVS Script with Individual Toggle Buttons
print("MVS Individual Toggles System")

-- ØªØ­Ù…ÙŠÙ„ WindUI
local WindUI = nil
local success, result = pcall(function()
    local source = game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua", true)
    if source then
        local loaded = loadstring(source)
        if loaded then
            return loaded()
        end
    end
    return nil
end)

if success and result then
    WindUI = result
    
    -- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    WindUI.TransparencyValue = 0.5
    WindUI:SetTheme("Dark")
    
    -- Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local RunService = game:GetService("RunService")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Workspace = game:GetService("Workspace")
    local Mouse = player:GetMouse()
    
    -- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨
    WindUI:Popup({
        Title = "ðŸŽ¯ MVS Shooting System",
        Icon = "target",
        Content = "Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ¨ Ù…Ø¹ Ø£Ø²Ø±Ø§Ø± Toggle Ù…Ù†ÙØµÙ„Ø©\n\nâ€¢ Auto Shoot - Toggle Ø®Ø§Øµ\nâ€¢ Click Shoot - Toggle Ø®Ø§Øµ\nâ€¢ Ø¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ù„Ø­Ø©",
        Buttons = {
            {
                Title = "Ø§Ø¨Ø¯Ø£",
                Icon = "play",
                Variant = "Primary",
                Callback = function()
                    print("ðŸš€ System started by user")
                end
            }
        }
    })
    
    -- =============================================
    -- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
    -- =============================================
    local AutoShootEnabled = false
    local ClickShootEnabled = false
    local currentWeapon = nil
    local isWeaponEquipped = false
    local lastFireTime = 0
    local fireDelay = 0.15  -- Ø³Ø±Ø¹Ø© Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹
    local AimDistance = 10000
    
    -- =============================================
    -- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    -- =============================================
    
    -- Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙØ±ÙŠÙ‚
    local function getTeamFrames()
        local success, redFrame, blueFrame = pcall(function()
            local playerGui = player:FindFirstChildOfClass("PlayerGui")
            if not playerGui then return nil, nil end
            
            local main = playerGui:FindFirstChild("Main")
            if not main then return nil, nil end
            
            local mainGameFrame = main:FindFirstChild("MainGameFrame")
            if not mainGameFrame then return nil, nil end
            
            local playersFrame = mainGameFrame:FindFirstChild("PlayersFrame")
            if not playersFrame then return nil, nil end
            
            return playersFrame:FindFirstChild("TeamRedFrame"), playersFrame:FindFirstChild("TeamBlueFrame")
        end)
        
        return redFrame, blueFrame
    end
    
    -- Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡ (Ù…Ø¨Ø³Ø·Ø©)
    local function getEnemyPlayers()
        local allPlayers = {}
        
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= player then
                local char = p.Character
                if char then
                    local humanoid = char:FindFirstChild("Humanoid")
                    if humanoid and humanoid.Health > 0 then
                        table.insert(allPlayers, p)
                    end
                end
            end
        end
        
        return allPlayers
    end
    
    -- Ø¯Ø§Ù„Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³Ù„Ø§Ø­
    local function initializeWeaponScript()
        local character = player.Character
        if not character then
            currentWeapon = nil
            isWeaponEquipped = false
            return
        end

        -- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³Ù„Ø§Ø­ ÙÙŠ Ø§Ù„ÙŠØ¯
        local equippedTool = nil
        for _, child in ipairs(character:GetChildren()) do
            if child:IsA("Tool") then
                equippedTool = child
                break
            end
        end

        -- Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù€ Backup Ø¥Ø°Ø§ Ù…Ø§ Ù„Ù‚Ù‰ ÙÙŠ Ø§Ù„ÙŠØ¯
        if not equippedTool and player.Backpack then
            for _, tool in ipairs(player.Backpack:GetChildren()) do
                if tool:IsA("Tool") then
                    equippedTool = tool
                    break
                end
            end
        end

        if equippedTool and currentWeapon ~= equippedTool then
            currentWeapon = equippedTool
            isWeaponEquipped = true
            print("âœ… Weapon equipped:", currentWeapon.Name)
        elseif not equippedTool and isWeaponEquipped then
            currentWeapon = nil
            isWeaponEquipped = false
            print("âŒ No weapon equipped")
        end
    end
    
    -- Ø¯Ø§Ù„Ø© Ø¥ÙŠØ¬Ø§Ø¯ Ø£Ù‚Ø±Ø¨ Ù„Ø§Ø¹Ø¨
    local function getClosestPlayer()
        local players = getEnemyPlayers()
        if not players or #players == 0 then 
            return nil
        end

        local character = player.Character
        if not character then return nil end
        
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then return nil end

        local closestPlayer = nil
        local minDistance = AimDistance
        
        for _, enemyPlayer in ipairs(players) do
            local targetCharacter = enemyPlayer.Character
            if targetCharacter then
                local targetHrp = targetCharacter:FindFirstChild("HumanoidRootPart")
                local targetHumanoid = targetCharacter:FindFirstChild("Humanoid")
                
                if targetHrp and targetHumanoid and targetHumanoid.Health > 0 then
                    local distance = (hrp.Position - targetHrp.Position).Magnitude
                    if distance < minDistance then
                        minDistance = distance
                        closestPlayer = enemyPlayer
                    end
                end
            end
        end
        
        return closestPlayer
    end
    
    -- Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù…Ø­Ø³Ù†Ø©)
    local function shootLogic()
        if tick() - lastFireTime < fireDelay then return false end
        
        if not isWeaponEquipped or not currentWeapon then 
            return false
        end
        
        lastFireTime = tick()
        
        local target = getClosestPlayer()
        if not target then 
            return false
        end
        
        local targetCharacter = target.Character
        if not targetCharacter then return false end
        
        local targetHrp = targetCharacter:FindFirstChild("HumanoidRootPart")
        if not targetHrp then return false end
        
        local localCharacter = player.Character
        if not localCharacter then return false end
        
        local localHrp = localCharacter:FindFirstChild("HumanoidRootPart")
        if not localHrp then return false end
        
        local predictedPosition = targetHrp.Position
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù…ÙŠØ¹ Ø·Ø±Ù‚ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø§Ø±
        local fired = false
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© RemoteEvent Ø§Ù„Ø£ÙˆÙ„ (fire)
        if currentWeapon:FindFirstChild("fire") then
            pcall(function()
                currentWeapon.fire:FireServer()
                fired = true
            end)
        end
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© Ø£ÙŠ RemoteEvent Ø¢Ø®Ø±
        if not fired then
            for _, child in ipairs(currentWeapon:GetDescendants()) do
                if child:IsA("RemoteEvent") then
                    pcall(function()
                        child:FireServer()
                        fired = true
                    end)
                    if fired then break end
                end
            end
        end
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© RemoteFunctions
        if not fired then
            for _, child in ipairs(currentWeapon:GetDescendants()) do
                if child:IsA("RemoteFunction") then
                    pcall(function()
                        child:InvokeServer()
                        fired = true
                    end)
                    if fired then break end
                end
            end
        end
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù‚ØªÙ„ Ø¥Ø°Ø§ ÙˆØ¬Ø¯
        if currentWeapon:FindFirstChild("kill") then
            pcall(function()
                local direction = (predictedPosition - localHrp.Position).Unit
                currentWeapon.kill:FireServer(target, direction, localHrp.Position)
            end)
        end
        
        return fired
    end
    
    -- =============================================
    -- Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© WindUI
    -- =============================================
    
    local Window = WindUI:CreateWindow({
        Title = "ðŸŽ¯ MVS Shooting System",
        Icon = "target",
        Author = "Individual Toggles",
        Folder = "MVS_Toggles",
        Size = UDim2.fromOffset(500, 450),
        Theme = "Dark"
    })
    
    local MainSection = Window:Section({ Title = "ðŸŽ® Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØ¨", Opened = true })
    local MainTab = MainSection:Tab({ Title = "Ø§Ù„Ø£Ø¯ÙˆØ§Øª", Icon = "tool" })
    
    -- =============================================
    -- Ø²Ø± Auto Shoot Toggle
    -- =============================================
    local autoShootButton = nil
    local autoShootText = "âš¡ Auto Shoot: OFF"
    
    local function updateAutoShootButton()
        if autoShootButton then
            autoShootButton:Destroy()
        end
        
        local buttonConfig = {
            Title = autoShootText,
            Size = "xlarge",
            Icon = "zap",
            Callback = function()
                AutoShootEnabled = not AutoShootEnabled
                
                if AutoShootEnabled then
                    autoShootText = "âš¡ Auto Shoot: ON"
                    WindUI:Notify({
                        Title = "âœ… Auto Shoot Enabled",
                        Content = "Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…ÙØ¹Ù„ Ø§Ù„Ø¢Ù†",
                        Duration = 3,
                        Icon = "zap"
                    })
                else
                    autoShootText = "âš¡ Auto Shoot: OFF"
                    WindUI:Notify({
                        Title = "â¹ï¸ Auto Shoot Disabled",
                        Content = "Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹Ø·Ù„ Ø§Ù„Ø¢Ù†",
                        Duration = 3,
                        Icon = "power"
                    })
                end
                
                updateAutoShootButton()
            end
        }
        
        -- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
        if AutoShootEnabled then
            buttonConfig.Variant = "Success"  -- Ø£Ø®Ø¶Ø±
        else
            buttonConfig.Variant = "Destructive"  -- Ø£Ø­Ù…Ø±
        end
        
        autoShootButton = MainTab:Button(buttonConfig)
    end
    
    -- Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± Auto Shoot Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
    updateAutoShootButton()
    
    -- =============================================
    -- Ø²Ø± Click Shoot Toggle
    -- =============================================
    local clickShootButton = nil
    local clickShootText = "ðŸŽ¯ Click Shoot: OFF"
    
    local function updateClickShootButton()
        if clickShootButton then
            clickShootButton:Destroy()
        end
        
        local buttonConfig = {
            Title = clickShootText,
            Size = "xlarge",
            Icon = "mouse-pointer",
            Callback = function()
                ClickShootEnabled = not ClickShootEnabled
                
                if ClickShootEnabled then
                    clickShootText = "ðŸŽ¯ Click Shoot: ON"
                    WindUI:Notify({
                        Title = "âœ… Click Shoot Enabled",
                        Content = "Ø§Ù„ØªØµÙˆÙŠØ± Ø¨Ø§Ù„ÙƒÙ„ÙŠÙƒ Ù…ÙØ¹Ù„ Ø§Ù„Ø¢Ù†",
                        Duration = 3,
                        Icon = "mouse-pointer"
                    })
                else
                    clickShootText = "ðŸŽ¯ Click Shoot: OFF"
                    WindUI:Notify({
                        Title = "â¹ï¸ Click Shoot Disabled",
                        Content = "Ø§Ù„ØªØµÙˆÙŠØ± Ø¨Ø§Ù„ÙƒÙ„ÙŠÙƒ Ù…Ø¹Ø·Ù„ Ø§Ù„Ø¢Ù†",
                        Duration = 3,
                        Icon = "power"
                    })
                end
                
                updateClickShootButton()
            end
        }
        
        -- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
        if ClickShootEnabled then
            buttonConfig.Variant = "Success"  -- Ø£Ø®Ø¶Ø±
        else
            buttonConfig.Variant = "Destructive"  -- Ø£Ø­Ù…Ø±
        end
        
        clickShootButton = MainTab:Button(buttonConfig)
    end
    
    -- Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± Click Shoot Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
    updateClickShootButton()
    
    -- =============================================
    -- Ø²Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³Ù„Ø§Ø­
    -- =============================================
    local weaponInfoButton = nil
    
    local function updateWeaponInfoButton()
        if weaponInfoButton then
            weaponInfoButton:Destroy()
        end
        
        local weaponName = "âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù„Ø§Ø­"
        local weaponStatus = "ØºÙŠØ± Ù…Ø¹Ø¨Ø£"
        
        if currentWeapon then
            weaponName = "ðŸ”« " .. currentWeapon.Name
            weaponStatus = "âœ… Ù…Ø¹Ø¨Ø£"
        end
        
        local buttonText = weaponName .. " - " .. weaponStatus
        
        weaponInfoButton = MainTab:Button({
            Title = buttonText,
            Icon = "package",
            Size = "medium",
            Variant = "Outline",
            Callback = function()
                initializeWeaponScript()
                WindUI:Notify({
                    Title = "ðŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù„Ø§Ø­",
                    Content = "ØªÙ… Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø³Ù„Ø­Ø©",
                    Duration = 2
                })
                updateWeaponInfoButton()
            end
        })
    end
    
    -- Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³Ù„Ø§Ø­
    updateWeaponInfoButton()
    
    -- =============================================
    -- Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
    -- =============================================
    MainTab:Button({
        Title = "ðŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…",
        Icon = "refresh-cw",
        Size = "medium",
        Callback = function()
            initializeWeaponScript()
            updateWeaponInfoButton()
            WindUI:Notify({
                Title = "ðŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„",
                Content = "ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©",
                Duration = 3
            })
        end
    })
    
    -- =============================================
    -- Ø²Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
    -- =============================================
    MainTab:Button({
        Title = "ðŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…",
        Icon = "bar-chart",
        Size = "medium",
        Callback = function()
            local weaponName = "Ù„Ø§ ÙŠÙˆØ¬Ø¯"
            if currentWeapon then
                weaponName = currentWeapon.Name
            end
            
            local targetCount = #getEnemyPlayers()
            
            WindUI:Popup({
                Title = "ðŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…",
                Icon = "info",
                Content = "ðŸŽ¯ Auto Shoot: " .. (AutoShootEnabled and "âœ… ON" or "âŒ OFF") ..
                        "\nðŸŽ¯ Click Shoot: " .. (ClickShootEnabled and "âœ… ON" or "âŒ OFF") ..
                        "\n\nðŸ”« Ø§Ù„Ø³Ù„Ø§Ø­: " .. weaponName ..
                        "\nðŸŽ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù: " .. targetCount ..
                        "\nâš¡ Ø§Ù„Ø³Ø±Ø¹Ø©: " .. fireDelay .. " Ø«Ø§Ù†ÙŠØ©" ..
                        "\nðŸ“ Ø§Ù„Ù…Ø³Ø§ÙØ©: " .. AimDistance,
                Buttons = {
                    {
                        Title = "ØªÙ…",
                        Icon = "check",
                        Callback = function() end
                    }
                }
            })
        end
    })
    
    -- =============================================
    -- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    -- =============================================
    MainTab:Button({
        Title = "âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
        Icon = "settings",
        Size = "medium",
        Callback = function()
            WindUI:Popup({
                Title = "âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµÙˆÙŠØ¨",
                Icon = "settings",
                Content = "âš¡ Ø³Ø±Ø¹Ø© Ø§Ù„ØªØµÙˆÙŠØ±: " .. fireDelay .. " Ø«Ø§Ù†ÙŠØ©" ..
                        "\nðŸ“ Ù…Ø³Ø§ÙØ© Ø§Ù„ØªØµÙˆÙŠØ¨: " .. AimDistance ..
                        "\n\nâš ï¸ ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ø§Ù„ÙƒÙˆØ¯",
                Buttons = {
                    {
                        Title = "ØªÙ…",
                        Icon = "check",
                        Callback = function() end
                    }
                }
            })
        end
    })
    
    -- =============================================
    -- Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
    -- =============================================
    MainTab:Button({
        Title = "â¹ï¸ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ÙƒØ±Ø¨Øª",
        Icon = "x",
        Size = "medium",
        Variant = "Destructive",
        Callback = function()
            Window:Destroy()
            WindUI:Notify({
                Title = "ðŸ‘‹ ÙˆØ¯Ø§Ø¹Ø§Ù‹",
                Content = "ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ø¸Ø§Ù… MVS",
                Duration = 3
            })
        end
    })
    
    -- =============================================
    -- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„
    -- =============================================
    
    -- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø³Ù„Ø­Ø©
    initializeWeaponScript()
    
    -- ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø³Ù„Ø­Ø© Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±
    task.spawn(function()
        while task.wait(0.2) do
            initializeWeaponScript()
            updateWeaponInfoButton()
        end
    end)
    
    -- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    task.spawn(function()
        while RunService.Heartbeat:Wait() do
            if AutoShootEnabled then
                if isWeaponEquipped and currentWeapon then
                    shootLogic()
                end
            end
        end
    end)
    
    -- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ± Ø¨Ø§Ù„ÙƒÙ„ÙŠÙƒ
    Mouse.Button1Down:Connect(function()
        if ClickShootEnabled then
            if isWeaponEquipped and currentWeapon then
                local success = shootLogic()
                if success then
                    -- Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø³ÙŠØ·
                    task.spawn(function()
                        WindUI:Notify({
                            Title = "ðŸŽ¯ ØªÙ…!",
                            Content = "",
                            Duration = 0.3
                        })
                    end)
                end
            end
        end
    end)
    
    -- Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
    task.wait(2)
    WindUI:Notify({
        Title = "ðŸŽ¯ MVS System Ready",
        Content = "Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø²!\nAuto Shoot Ùˆ Click Shoot Ù…ÙØµÙˆÙ„ÙŠÙ†",
        Duration = 5
    })
    
    print("======================================")
    print("âœ… MVS Individual Toggles System Loaded!")
    print("ðŸŽ® Player:", player.Name)
    print("âš¡ Auto Shoot:", AutoShootEnabled)
    print("ðŸŽ¯ Click Shoot:", ClickShootEnabled)
    print("======================================")
    
else
    print("âŒ Failed to load WindUI")
end