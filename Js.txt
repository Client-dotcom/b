-- MVS Complete Script with Single Toggle Control
print("MVS Complete Toggle System")

-- ØªØ­Ù…ÙŠÙ„ WindUI
local WindUI = nil
local success, result = pcall(function()
    local source = game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua", true)
    if source then
        local loaded = loadstring(source)
        if loaded then
            return loaded()
        end
    end
    return nil
end)

if success and result then
    WindUI = result
    
    -- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    WindUI.TransparencyValue = 0.5
    WindUI:SetTheme("Dark")
    
    -- Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local RunService = game:GetService("RunService")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Workspace = game:GetService("Workspace")
    local Mouse = player:GetMouse()
    
    -- =============================================
    -- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
    -- =============================================
    local ShootingMode = "OFF"  -- OFF, CLICK, AUTO
    local currentWeapon = nil
    local isWeaponEquipped = false
    local lastFireTime = 0
    local fireDelay = 0.2  -- Ø³Ø±Ø¹Ø© Ø³Ø±ÙŠØ¹Ø©
    local AimDistance = 5000
    
    -- =============================================
    -- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    -- =============================================
    
    -- Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙØ±ÙŠÙ‚
    local function getTeamFrames()
        local success, redFrame, blueFrame = pcall(function()
            local playerGui = player:FindFirstChildOfClass("PlayerGui")
            if not playerGui then return nil, nil end
            
            local main = playerGui:FindFirstChild("Main")
            if not main then return nil, nil end
            
            local mainGameFrame = main:FindFirstChild("MainGameFrame")
            if not mainGameFrame then return nil, nil end
            
            local playersFrame = mainGameFrame:FindFirstChild("PlayersFrame")
            if not playersFrame then return nil, nil end
            
            return playersFrame:FindFirstChild("TeamRedFrame"), playersFrame:FindFirstChild("TeamBlueFrame")
        end)
        
        return redFrame, blueFrame
    end
    
    -- Ø¯Ø§Ù„Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
    local function sanitizeName(name)
        return tostring(name):gsub("%s+", "")
    end
    
    -- Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
    local function getEnemyPlayers()
        local redFrame, blueFrame = getTeamFrames()
        if not redFrame or not blueFrame then 
            -- Ø¥Ø°Ø§ Ù…Ø§ Ù„Ù‚Ù‰ ÙØ±Ù‚ØŒ ÙŠØ±Ø¬Ø¹ ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ø¯Ø§ Ù†ÙØ³Ù‡
            local allPlayers = {}
            for _, p in pairs(Players:GetPlayers()) do
                if p ~= player then
                    table.insert(allPlayers, p)
                end
            end
            return allPlayers
        end

        local redPlayers = {}
        local bluePlayers = {}
        
        for _, child in ipairs(redFrame:GetChildren()) do
            if child:IsA("Frame") then
                table.insert(redPlayers, child.Name)
            end
        end

        for _, child in ipairs(blueFrame:GetChildren()) do
            if child:IsA("Frame") then
                table.insert(bluePlayers, child.Name)
            end
        end

        local isLocalPlayerInRed = false
        local isLocalPlayerInBlue = false

        local sanitizedLocalPlayerName = sanitizeName(player.Name)

        for _, name in ipairs(redPlayers) do
            if sanitizeName(name) == sanitizedLocalPlayerName then
                isLocalPlayerInRed = true
                break
            end
        end

        for _, name in ipairs(bluePlayers) do
            if sanitizeName(name) == sanitizedLocalPlayerName then
                isLocalPlayerInBlue = true
                break
            end
        end

        if not isLocalPlayerInRed and not isLocalPlayerInBlue then
            local allPlayers = {}
            for _, p in pairs(Players:GetPlayers()) do
                if p ~= player then
                    table.insert(allPlayers, p)
                end
            end
            return allPlayers
        end

        local enemyFrame = isLocalPlayerInRed and blueFrame or redFrame
        local enemyNames = {}
        
        for _, child in ipairs(enemyFrame:GetChildren()) do
            if child:IsA("Frame") then
                table.insert(enemyNames, child.Name)
            end
        end

        local enemyPlayerInstances = {}
        for _, name in ipairs(enemyNames) do
            local enemyPlayer = Players:FindFirstChild(name)
            if enemyPlayer and enemyPlayer ~= player then
                table.insert(enemyPlayerInstances, enemyPlayer)
            end
        end

        return enemyPlayerInstances
    end
    
    -- Ø¯Ø§Ù„Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³Ù„Ø§Ø­
    local function initializeWeaponScript()
        local character = player.Character
        if not character then
            currentWeapon = nil
            isWeaponEquipped = false
            return
        end

        -- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³Ù„Ø§Ø­ ÙÙŠ Ø§Ù„ÙŠØ¯
        local equippedTool
        for _, child in ipairs(character:GetChildren()) do
            if child:IsA("Tool") then
                -- ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¯ÙˆØ§Ù„ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø§Ø±
                if child:FindFirstChild("fire") or child:FindFirstChild("Fire") or child:FindFirstChild("Shoot") then
                    equippedTool = child
                    break
                end
            end
        end

        -- Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù€ Backup Ø¥Ø°Ø§ Ù…Ø§ Ù„Ù‚Ù‰ ÙÙŠ Ø§Ù„ÙŠØ¯
        if not equippedTool and player.Backpack then
            for _, tool in ipairs(player.Backpack:GetChildren()) do
                if tool:IsA("Tool") then
                    if tool:FindFirstChild("fire") or tool:FindFirstChild("Fire") or tool:FindFirstChild("Shoot") then
                        equippedTool = tool
                        break
                    end
                end
            end
        end

        if equippedTool and currentWeapon ~= equippedTool then
            currentWeapon = equippedTool
            isWeaponEquipped = true
            print("âœ… Weapon found:", currentWeapon.Name)
        elseif not equippedTool and isWeaponEquipped then
            currentWeapon = nil
            isWeaponEquipped = false
            print("âŒ No weapon equipped")
        end
    end
    
    -- Ø¯Ø§Ù„Ø© Ø¥ÙŠØ¬Ø§Ø¯ Ø£Ù‚Ø±Ø¨ Ù„Ø§Ø¹Ø¨
    local function getClosestPlayer()
        local players = getEnemyPlayers()
        if not players or #players == 0 then 
            return nil
        end

        local character = player.Character
        if not character then return nil end
        
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then return nil end

        local closestPlayer = nil
        local minDistance = AimDistance
        
        for _, enemyPlayer in ipairs(players) do
            if enemyPlayer and typeof(enemyPlayer) == "Instance" and enemyPlayer:IsA("Player") then
                local targetCharacter = enemyPlayer.Character
                if targetCharacter then
                    local targetHrp = targetCharacter:FindFirstChild("HumanoidRootPart")
                    local targetHumanoid = targetCharacter:FindFirstChild("Humanoid")
                    
                    if targetHrp and targetHumanoid and targetHumanoid.Health > 0 then
                        local distance = (hrp.Position - targetHrp.Position).Magnitude
                        if distance < minDistance then
                            minDistance = distance
                            closestPlayer = enemyPlayer
                        end
                    end
                end
            end
        end
        
        return closestPlayer
    end
    
    -- Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    local function shootLogic()
        if tick() - lastFireTime < fireDelay then return false end
        
        if not isWeaponEquipped or not currentWeapon then 
            print("âŒ No weapon equipped")
            return false
        end
        
        lastFireTime = tick()
        
        local target = getClosestPlayer()
        if not target then 
            print("âŒ No target found")
            return false
        end
        
        print("ðŸŽ¯ Target found:", target.Name)
        
        local localCharacter = player.Character
        if not localCharacter then return false end
        
        local localHrp = localCharacter:FindFirstChild("HumanoidRootPart")
        if not localHrp then return false end

        local targetCharacter = target.Character
        if not targetCharacter then return false end
        
        local targetHrp = targetCharacter:FindFirstChild("HumanoidRootPart")
        if not targetHrp then return false end

        local predictedPosition = targetHrp.Position
        local handle = currentWeapon:FindFirstChild("Handle") or currentWeapon
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù…ÙŠØ¹ Ø·Ø±Ù‚ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø§Ø±
        local fired = false
        
        -- Ø·Ø±ÙŠÙ‚Ø© 1: fire
        if currentWeapon:FindFirstChild("fire") then
            pcall(function()
                currentWeapon.fire:FireServer()
                fired = true
                print("ðŸ”« Fired using 'fire'")
            end)
        end
        
        -- Ø·Ø±ÙŠÙ‚Ø© 2: Fire
        if not fired and currentWeapon:FindFirstChild("Fire") then
            pcall(function()
                currentWeapon.Fire:FireServer()
                fired = true
                print("ðŸ”« Fired using 'Fire'")
            end)
        end
        
        -- Ø·Ø±ÙŠÙ‚Ø© 3: Shoot
        if not fired and currentWeapon:FindFirstChild("Shoot") then
            pcall(function()
                currentWeapon.Shoot:FireServer()
                fired = true
                print("ðŸ”« Fired using 'Shoot'")
            end)
        end
        
        -- Ø·Ø±ÙŠÙ‚Ø© 4: Activate
        if not fired and currentWeapon:FindFirstChild("Activate") then
            pcall(function()
                currentWeapon.Activate:FireServer()
                fired = true
                print("ðŸ”« Fired using 'Activate'")
            end)
        end
        
        -- Ø·Ø±ÙŠÙ‚Ø© 5: Ø£ÙŠ RemoteEvent
        if not fired then
            for _, child in ipairs(currentWeapon:GetDescendants()) do
                if child:IsA("RemoteEvent") and not fired then
                    pcall(function()
                        child:FireServer()
                        fired = true
                        print("ðŸ”« Fired using RemoteEvent:", child.Name)
                    end)
                end
            end
        end
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ù‚ØªÙ„
        if currentWeapon:FindFirstChild("kill") then
            pcall(function()
                local direction = (predictedPosition - localHrp.Position).Unit
                currentWeapon.kill:FireServer(target, direction, localHrp.Position)
                print("ðŸ’€ Kill command sent")
            end)
        elseif currentWeapon:FindFirstChild("Damage") then
            pcall(function()
                currentWeapon.Damage:FireServer(target)
                print("ðŸ’€ Damage command sent")
            end)
        end
        
        -- Ù…Ø­Ø§ÙˆÙ„Ø© Ø£Ø´Ø¹Ø© Ø§Ù„Ù„ÙŠØ²Ø±
        if ReplicatedStorage:FindFirstChild("LocalBeam") then
            pcall(function()
                ReplicatedStorage.LocalBeam:Fire(handle, predictedPosition)
                print("ðŸ”¦ Beam sent")
            end)
        end
        
        if currentWeapon:FindFirstChild("showBeam") then
            pcall(function()
                currentWeapon.showBeam:FireServer(predictedPosition, localHrp.Position, handle)
                print("ðŸ”¦ Show beam sent")
            end)
        end
        
        if fired then
            print("âœ… Successfully shot at:", target.Name)
            return true
        else
            print("âŒ Could not fire weapon")
            return false
        end
    end
    
    -- =============================================
    -- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    -- =============================================
    
    -- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨
    task.wait(1)
    WindUI:Popup({
        Title = "ðŸŽ¯ MVS Shooting System",
        Icon = "target",
        Content = "Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ¨ Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ ØªØ­ÙƒÙ… Toggle ÙˆØ§Ø­Ø¯\n\nâ€¢ Ø²Ø± ÙˆØ§Ø­Ø¯ Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ ÙƒÙ„ Ø´ÙŠØ¡\nâ€¢ Ø¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ù„Ø­Ø©\nâ€¢ Ù†Ø¸Ø§Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆÙŠØ¯ÙˆÙŠ",
        Buttons = {
            {
                Title = "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†",
                Icon = "play",
                Variant = "Primary",
                Callback = function()
                    print("ðŸš€ System started")
                end
            }
        }
    })
    
    -- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    local Window = WindUI:CreateWindow({
        Title = "ðŸŽ¯ MVS Toggle System",
        Icon = "toggle-right",
        Author = "MVS Pro",
        Folder = "MVS_System",
        Size = UDim2.fromOffset(500, 400),
        Theme = "Dark",
        User = {
            Enabled = true,
            Anonymous = false,
            Callback = function()
                WindUI:Notify({
                    Title = "ðŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨",
                    Content = "Ø§Ø³Ù…Ùƒ: " .. player.Name,
                    Duration = 3
                })
            end
        }
    })
    
    -- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    local MainSection = Window:Section({ Title = "Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ", Opened = true })
    local MainTab = MainSection:Tab({ Title = "ðŸŽ® Ø§Ù„ØªØ­ÙƒÙ…", Icon = "gamepad" })
    
    -- =============================================
    -- Ø²Ø± Toggle Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    -- =============================================
    local toggleButton = nil
    local toggleButtonText = "â¹ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø¹Ø·Ù„"
    
    local function updateToggleButton()
        if toggleButton then
            toggleButton:Destroy()
        end
        
        local buttonConfig = {
            Title = toggleButtonText,
            Size = "xlarge",
            Callback = function()
                if ShootingMode == "OFF" then
                    -- Ù…Ù† OFF Ø¥Ù„Ù‰ CLICK
                    ShootingMode = "CLICK"
                    toggleButtonText = "ðŸŽ¯ ÙˆØ¶Ø¹ Ø§Ù„ÙƒÙ„ÙŠÙƒ Ù…ÙØ¹Ù„"
                    
                    WindUI:Notify({
                        Title = "âœ… ØªÙ… Ø§Ù„ØªØ´ØºÙŠÙ„",
                        Content = "ÙˆØ¶Ø¹ Ø§Ù„ØªØµÙˆÙŠØ± Ø¨Ø§Ù„ÙƒÙ„ÙŠÙƒ Ù…ÙØ¹Ù„\nØ§Ø¶ØºØ· Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ Ù„Ù„ØªØµÙˆÙŠØ¨",
                        Duration = 4,
                        Icon = "mouse-pointer"
                    })
                    
                    updateToggleButton()
                    
                elseif ShootingMode == "CLICK" then
                    -- Ù…Ù† CLICK Ø¥Ù„Ù‰ AUTO
                    ShootingMode = "AUTO"
                    toggleButtonText = "âš¡ Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…ÙØ¹Ù„"
                    
                    WindUI:Notify({
                        Title = "âš¡ Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ",
                        Content = "ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ\nØ§Ù„Ù†Ø¸Ø§Ù… ÙŠØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹",
                        Duration = 4,
                        Icon = "zap"
                    })
                    
                    updateToggleButton()
                    
                elseif ShootingMode == "AUTO" then
                    -- Ù…Ù† AUTO Ø¥Ù„Ù‰ OFF
                    ShootingMode = "OFF"
                    toggleButtonText = "â¹ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø¹Ø·Ù„"
                    
                    WindUI:Notify({
                        Title = "â¹ï¸ ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù",
                        Content = "ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ØªØµÙˆÙŠØ±",
                        Duration = 3,
                        Icon = "power"
                    })
                    
                    updateToggleButton()
                end
            end
        }
        
        -- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
        if ShootingMode == "OFF" then
            buttonConfig.Icon = "power"
            buttonConfig.Variant = "Destructive"  -- Ø£Ø­Ù…Ø±
        elseif ShootingMode == "CLICK" then
            buttonConfig.Icon = "mouse-pointer"
            buttonConfig.Variant = "Success"      -- Ø£Ø®Ø¶Ø±
        elseif ShootingMode == "AUTO" then
            buttonConfig.Icon = "zap"
            buttonConfig.Variant = "Success"      -- Ø£Ø®Ø¶Ø±
        end
        
        toggleButton = MainTab:Button(buttonConfig)
    end
    
    -- Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± Toggle Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
    updateToggleButton()
    
    -- =============================================
    -- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
    -- =============================================
    
    -- Ø²Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù„Ø§Ø­
    MainTab:Button({
        Title = "ðŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù„Ø§Ø­",
        Icon = "refresh-cw",
        Size = "medium",
        Callback = function()
            initializeWeaponScript()
            if isWeaponEquipped and currentWeapon then
                WindUI:Notify({
                    Title = "âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«",
                    Content = "Ø§Ù„Ø³Ù„Ø§Ø­ Ø§Ù„Ø­Ø§Ù„ÙŠ: " .. currentWeapon.Name,
                    Duration = 4
                })
            else
                WindUI:Notify({
                    Title = "âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù„Ø§Ø­",
                    Content = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ù„Ø§Ø­\nØ£Ù…Ø³Ùƒ Ø³Ù„Ø§Ø­Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹",
                    Duration = 4
                })
            end
        end
    })
    
    -- Ø²Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµÙˆÙŠØ¨
    MainTab:Button({
        Title = "ðŸŽ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµÙˆÙŠØ¨",
        Icon = "target",
        Size = "medium",
        Callback = function()
            if isWeaponEquipped and currentWeapon then
                local target = getClosestPlayer()
                if target then
                    local success = shootLogic()
                    if success then
                        WindUI:Notify({
                            Title = "âœ… ØªÙ… Ø§Ù„ØªØµÙˆÙŠØ¨",
                            Content = "ØªÙ… Ø§Ù„ØªØµÙˆÙŠØ¨ Ø¹Ù„Ù‰: " .. target.Name,
                            Duration = 3
                        })
                    else
                        WindUI:Notify({
                            Title = "âŒ ÙØ´Ù„ Ø§Ù„ØªØµÙˆÙŠØ¨",
                            Content = "ØªØ¹Ø°Ø± Ø§Ù„ØªØµÙˆÙŠØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø¯Ù",
                            Duration = 3
                        })
                    end
                else
                    WindUI:Notify({
                        Title = "ðŸŽ¯ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ù‡Ø¯Ø§Ù",
                        Content = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£Ù‡Ø¯Ø§Ù",
                        Duration = 3
                    })
                end
            else
                WindUI:Notify({
                    Title = "ðŸ”« Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù„Ø§Ø­",
                    Content = "Ø£Ù…Ø³Ùƒ Ø³Ù„Ø§Ø­Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹",
                    Duration = 3
                })
            end
        end
    })
    
    -- Ø²Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
    MainTab:Button({
        Title = "â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…",
        Icon = "info",
        Size = "medium",
        Callback = function()
            local weaponName = "Ù„Ø§ ÙŠÙˆØ¬Ø¯"
            if currentWeapon then
                weaponName = currentWeapon.Name
            end
            
            local targetCount = 0
            local players = getEnemyPlayers()
            if players then
                targetCount = #players
            end
            
            WindUI:Popup({
                Title = "ðŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…",
                Icon = "bar-chart",
                Content = "Ø§Ù„Ø­Ø§Ù„Ø©: " .. ShootingMode .. 
                        "\n\nØ§Ù„Ø³Ù„Ø§Ø­: " .. weaponName .. 
                        "\nØ§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…ØªØ§Ø­Ø©: " .. targetCount .. 
                        "\nØ§Ù„Ù…Ø³Ø§ÙØ©: " .. AimDistance .. 
                        "\nØ§Ù„Ø³Ø±Ø¹Ø©: " .. fireDelay .. " Ø«Ø§Ù†ÙŠØ©" ..
                        "\n\nØ§Ù„Ù„Ø§Ø¹Ø¨: " .. player.Name,
                Buttons = {
                    {
                        Title = "ØªÙ…",
                        Icon = "check",
                        Variant = "Primary",
                        Callback = function() end
                    }
                }
            })
        end
    })
    
    -- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    MainTab:Button({
        Title = "âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
        Icon = "settings",
        Size = "medium",
        Callback = function()
            WindUI:Popup({
                Title = "âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…",
                Icon = "settings",
                Content = "Ø³Ø±Ø¹Ø© Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø§Ø±: " .. fireDelay .. " Ø«Ø§Ù†ÙŠØ©" ..
                        "\n\nÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯",
                Buttons = {
                    {
                        Title = "Ø¥ØºÙ„Ø§Ù‚",
                        Icon = "x",
                        Variant = "Primary",
                        Callback = function() end
                    }
                }
            })
        end
    })
    
    -- Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
    MainTab:Button({
        Title = "â¹ï¸ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ÙƒØ±Ø¨Øª",
        Icon = "x",
        Size = "medium",
        Variant = "Destructive",
        Callback = function()
            Window:Destroy()
            WindUI:Notify({
                Title = "ðŸ‘‹ ÙˆØ¯Ø§Ø¹Ø§Ù‹",
                Content = "ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ø¸Ø§Ù… MVS",
                Duration = 3
            })
        end
    })
    
    -- =============================================
    -- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„
    -- =============================================
    
    -- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø³Ù„Ø­Ø©
    initializeWeaponScript()
    
    -- Ù…ØªØ§Ø¨Ø¹Ø© ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ø³Ù„Ø­Ø©
    task.spawn(function()
        while task.wait(0.3) do
            initializeWeaponScript()
        end
    end)
    
    -- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    task.spawn(function()
        while RunService.Heartbeat:Wait() do
            if ShootingMode == "AUTO" then
                if isWeaponEquipped and currentWeapon then
                    shootLogic()
                end
            end
        end
    end)
    
    -- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ± Ø¨Ø§Ù„ÙƒÙ„ÙŠÙƒ
    Mouse.Button1Down:Connect(function()
        if ShootingMode == "CLICK" then
            if isWeaponEquipped and currentWeapon then
                local success = shootLogic()
                if success then
                    -- Ø¥Ø´Ø¹Ø§Ø± ØµØºÙŠØ± Ø³Ø±ÙŠØ¹
                    task.spawn(function()
                        WindUI:Notify({
                            Title = "ðŸŽ¯ ØªÙ…!",
                            Content = "",
                            Duration = 0.5
                        })
                    end)
                end
            end
        end
    end)
    
    -- Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
    task.wait(3)
    WindUI:Notify({
        Title = "ðŸŽ¯ MVS System Ready",
        Content = "Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„!\nØ§Ø³ØªØ®Ø¯Ù… Ø²Ø± Toggle Ù„Ù„ØªØ­ÙƒÙ…",
        Duration = 6
    })
    
    print("======================================")
    print("âœ… MVS Toggle System Loaded Successfully!")
    print("ðŸŽ® Player:", player.Name)
    print("ðŸŽ¯ Controls: Single Toggle Button")
    print("======================================")
    
else
    print("âŒ Failed to load WindUI:", result)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "MVS System Error",
        Text = "Failed to load UI Library",
        Duration = 5
    })
end