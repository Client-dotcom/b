--[[
    ŸÜÿ∏ÿßŸÖ Auto Shoot ÿßŸÑŸÉÿßŸÖŸÑ - ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿØŸÇŸäŸÇÿ©
    ÿ•ÿ∑ŸÑÿßŸÇ ÿØŸÇŸäŸÇ + ÿ•ÿµÿßÿ®ÿ© ŸÖÿ∂ŸÖŸàŸÜÿ©
]]

-- ======== ÿßŸÑÿÆÿØŸÖÿßÿ™ ========
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Camera = Workspace.CurrentCamera

-- ======== ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ========
local AimBot = {
    Enabled = false,
    TeamCheck = true,
    MaxDistance = 500,
    FOV = 120,
    Smoothing = 15,
    AutoShoot = true,
    ShootDelay = 0.2,
    TargetPart = "Head", -- "Head", "HumanoidRootPart", "Torso"
    BulletSpeed = 1200,
    Prediction = true,
    PredictionAmount = 0.15,
    WallCheck = true
}

local CurrentTarget = nil
local LastShot = 0
local CurrentWeapon = nil

-- ======== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸáÿØŸÅ ========
local function GetEnemyPlayers()
    local enemies = {}
    
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            if AimBot.TeamCheck and player.Team then
                if player.Team ~= LocalPlayer.Team then
                    table.insert(enemies, player)
                end
            else
                table.insert(enemies, player)
            end
        end
    end
    
    return enemies
end

local function GetClosestTarget()
    local enemies = GetEnemyPlayers()
    local closestTarget = nil
    local closestDistance = AimBot.FOV
    local mousePos = Vector2.new(Mouse.X, Mouse.Y)
    
    for _, player in ipairs(enemies) do
        local character = player.Character
        if not character then continue end
        
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if not humanoid or humanoid.Health <= 0 then continue end
        
        local targetPart = character:FindFirstChild(Aimbot.TargetPart)
        if not targetPart then
            targetPart = character:FindFirstChild("HumanoidRootPart")
        end
        if not targetPart then continue end
        
        -- ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ≥ÿßŸÅÿ©
        local distance = (targetPart.Position - Camera.CFrame.Position).Magnitude
        if distance > AimBot.MaxDistance then continue end
        
        -- ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ±ÿ§Ÿäÿ©
        if AimBot.WallCheck then
            local origin = Camera.CFrame.Position
            local target = targetPart.Position
            local direction = (target - origin).Unit
            
            local raycastParams = RaycastParams.new()
            raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
            raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
            
            local raycastResult = Workspace:Raycast(origin, direction * distance, raycastParams)
            
            if raycastResult and not raycastResult.Instance:IsDescendantOf(character) then
                continue
            end
        end
        
        -- ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ FOV
        local screenPos, onScreen = Camera:WorldToViewportPoint(targetPart.Position)
        if not onScreen then continue end
        
        local screenPos2D = Vector2.new(screenPos.X, screenPos.Y)
        local distanceToMouse = (screenPos2D - mousePos).Magnitude
        
        if distanceToMouse < closestDistance then
            closestDistance = distanceToMouse
            closestTarget = {
                Player = player,
                Character = character,
                TargetPart = targetPart,
                Distance = distance,
                ScreenPosition = screenPos2D
            }
        end
    end
    
    return closestTarget
end

-- ======== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿßŸÑÿØŸÇŸäŸÇ ========
local function CalculatePrediction(targetPart, distance)
    if not AimBot.Prediction or not targetPart.Velocity then
        return targetPart.Position
    end
    
    local velocity = targetPart.Velocity
    local timeToTarget = distance / AimBot.BulletSpeed
    
    -- ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸàÿ∂ÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸä
    local predictedPosition = targetPart.Position + (velocity * timeToTarget * AimBot.PredictionAmount)
    
    -- ÿ™ÿπŸàŸäÿ∂ ÿßŸÑÿ¨ÿßÿ∞ÿ®Ÿäÿ©
    local gravityCompensation = Vector3.new(0, 0.5 * 196.2 * timeToTarget^2, 0)
    predictedPosition = predictedPosition - gravityCompensation
    
    return predictedPosition
end

-- ======== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿµŸàŸäÿ® ÿßŸÑÿØŸÇŸäŸÇ ========
local function SmoothAim(targetPosition)
    if not AimBot.Smoothing then
        Camera.CFrame = CFrame.lookAt(Camera.CFrame.Position, targetPosition)
        return
    end
    
    local currentCFrame = Camera.CFrame
    local targetCFrame = CFrame.lookAt(currentCFrame.Position, targetPosition)
    local smoothedCFrame = currentCFrame:Lerp(targetCFrame, 1 / AimBot.Smoothing)
    Camera.CFrame = smoothedCFrame
end

-- ======== ŸÜÿ∏ÿßŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿßŸÑÿ≥ŸÑÿßÿ≠ ========
local function GetCurrentWeapon()
    local character = LocalPlayer.Character
    if not character then return nil end
    
    -- ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑŸäÿØ
    for _, tool in ipairs(character:GetChildren()) do
        if tool:IsA("Tool") then
            -- ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ RemoteEvents ŸÑÿ•ÿ∑ŸÑÿßŸÇ ÿßŸÑŸÜÿßÿ±
            local fireRemote = tool:FindFirstChild("Fire") or 
                              tool:FindFirstChild("fire") or
                              tool:FindFirstChild("RemoteEvent") or
                              tool:FindFirstChild("fireevent")
            
            if fireRemote then
                CurrentWeapon = tool
                return tool, fireRemote
            end
        end
    end
    
    -- ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ≠ŸÇŸäÿ®ÿ©
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    if backpack then
        for _, tool in ipairs(backpack:GetChildren()) do
            if tool:IsA("Tool") then
                local fireRemote = tool:FindFirstChild("Fire") or 
                                  tool:FindFirstChild("fire")
                if fireRemote then
                    CurrentWeapon = tool
                    return tool, fireRemote
                end
            end
        end
    end
    
    return nil, nil
end

-- ======== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇ ÿßŸÑÿ≠ŸÇŸäŸÇŸä ========
local function RealShoot(target)
    if not target then return false end
    
    local weapon, fireRemote = GetCurrentWeapon()
    if not weapon or not fireRemote then return false end
    
    -- ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸàÿ∂ÿπ ŸÖÿπ ÿßŸÑÿ™ŸÜÿ®ÿ§
    local predictedPosition = CalculatePrediction(target.TargetPart, target.Distance)
    
    -- ÿßŸÑÿ™ÿµŸàŸäÿ®
    SmoothAim(predictedPosition)
    
    -- ÿ•ÿ∑ŸÑÿßŸÇ ÿßŸÑŸÜÿßÿ±
    local currentTime = tick()
    if currentTime - LastShot >= AimBot.ShootDelay then
        -- ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© 1: FireServer
        local success = pcall(function()
            fireRemote:FireServer(predictedPosition, target.TargetPart)
        end)
        
        -- ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© 2: ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑÿ™ ÿßŸÑÿ£ŸàŸÑŸâ
        if not success then
            success = pcall(function()
                fireRemote:FireServer(predictedPosition)
            end)
        end
        
        -- ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© 3: ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑÿ™ ÿßŸÑÿ´ÿßŸÜŸäÿ©
        if not success then
            success = pcall(function()
                fireRemote:FireServer()
            end)
        end
        
        -- ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© 4: ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ RemoteFunction
        if not success then
            local remoteFunction = weapon:FindFirstChildWhichIsA("RemoteFunction")
            if remoteFunction then
                success = pcall(function()
                    remoteFunction:InvokeServer(predictedPosition, target.TargetPart)
                end)
            end
        end
        
        -- ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© 5: ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿ£ÿ≠ÿØÿßÿ´ ÿ£ÿÆÿ±Ÿâ
        if not success then
            for _, child in ipairs(weapon:GetDescendants()) do
                if child:IsA("RemoteEvent") and child.Name:lower():find("fire") then
                    success = pcall(function()
                        child:FireServer(predictedPosition)
                    end)
                    if success then break end
                end
            end
        end
        
        if success then
            LastShot = currentTime
            return true
        end
    end
    
    return false
end

-- ======== ÿ≠ŸÑŸÇÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ========
RunService.RenderStepped:Connect(function()
    if not AimBot.Enabled then
        CurrentTarget = nil
        return
    end
    
    -- ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸáÿØŸÅ
    local target = GetClosestTarget()
    CurrentTarget = target
    
    if not target then return end
    
    -- Auto Shoot
    if AimBot.AutoShoot then
        RealShoot(target)
    else
        -- ŸÅŸÇÿ∑ ÿßŸÑÿ™ÿµŸàŸäÿ® ÿ®ÿØŸàŸÜ ÿ•ÿ∑ŸÑÿßŸÇ
        local predictedPosition = CalculatePrediction(target.TargetPart, target.Distance)
        SmoothAim(predictedPosition)
    end
end)

-- ======== Ÿàÿßÿ¨Ÿáÿ© GUI ÿ®ÿ≥Ÿäÿ∑ÿ© ========
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AimBotGUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 220, 0, 200)
MainFrame.Position = UDim2.new(0, 20, 0.5, -100)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MainFrame.BorderSizePixel = 0
MainFrame.BackgroundTransparency = 0.1
MainFrame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
Title.BorderSizePixel = 0
Title.Text = "AIMBOT PRO"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 16
Title.Font = Enum.Font.SourceSansBold
Title.Parent = MainFrame

-- ÿ≤ÿ± AimBot
local AimButton = Instance.new("TextButton")
AimButton.Size = UDim2.new(0.9, 0, 0, 40)
AimButton.Position = UDim2.new(0.05, 0, 0.2, 0)
AimButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
AimButton.BorderSizePixel = 0
AimButton.Text = "AIMBOT: OFF"
AimButton.TextColor3 = Color3.fromRGB(255, 50, 50)
AimButton.TextSize = 16
AimButton.Font = Enum.Font.SourceSansBold
AimButton.Parent = MainFrame

AimButton.MouseButton1Click:Connect(function()
    AimBot.Enabled = not AimBot.Enabled
    
    if AimBot.Enabled then
        AimButton.Text = "AIMBOT: ON"
        AimButton.TextColor3 = Color3.fromRGB(0, 255, 100)
        AimButton.BackgroundColor3 = Color3.fromRGB(0, 100, 50)
    else
        AimButton.Text = "AIMBOT: OFF"
        AimButton.TextColor3 = Color3.fromRGB(255, 50, 50)
        AimButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
        CurrentTarget = nil
    end
    
    print("AIMBOT: " .. (AimBot.Enabled and "ON" or "OFF"))
end)

-- ÿ≤ÿ± Auto Shoot
local AutoShootButton = Instance.new("TextButton")
AutoShootButton.Size = UDim2.new(0.9, 0, 0, 40)
AutoShootButton.Position = UDim2.new(0.05, 0, 0.45, 0)
AutoShootButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
AutoShootButton.BorderSizePixel = 0
AutoShootButton.Text = "AUTO SHOOT: ON"
AutoShootButton.TextColor3 = Color3.fromRGB(0, 255, 100)
AutoShootButton.TextSize = 14
AutoShootButton.Font = Enum.Font.SourceSansBold
AutoShootButton.Parent = MainFrame

AutoShootButton.MouseButton1Click:Connect(function()
    AimBot.AutoShoot = not AimBot.AutoShoot
    
    if AimBot.AutoShoot then
        AutoShootButton.Text = "AUTO SHOOT: ON"
        AutoShootButton.TextColor3 = Color3.fromRGB(0, 255, 100)
        AutoShootButton.BackgroundColor3 = Color3.fromRGB(0, 100, 50)
    else
        AutoShootButton.Text = "AUTO SHOOT: OFF"
        AutoShootButton.TextColor3 = Color3.fromRGB(255, 50, 50)
        AutoShootButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    end
    
    print("AUTO SHOOT: " .. (AimBot.AutoShoot and "ON" or "OFF"))
end)

-- ÿ≤ÿ± Team Check
local TeamButton = Instance.new("TextButton")
TeamButton.Size = UDim2.new(0.9, 0, 0, 30)
TeamButton.Position = UDim2.new(0.05, 0, 0.75, 0)
TeamButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
TeamButton.BorderSizePixel = 0
TeamButton.Text = "TEAM CHECK: ON"
TeamButton.TextColor3 = Color3.fromRGB(0, 255, 100)
TeamButton.TextSize = 12
TeamButton.Font = Enum.Font.SourceSans
TeamButton.Parent = MainFrame

TeamButton.MouseButton1Click:Connect(function()
    AimBot.TeamCheck = not AimBot.TeamCheck
    
    if AimBot.TeamCheck then
        TeamButton.Text = "TEAM CHECK: ON"
        TeamButton.TextColor3 = Color3.fromRGB(0, 255, 100)
    else
        TeamButton.Text = "TEAM CHECK: OFF"
        TeamButton.TextColor3 = Color3.fromRGB(255, 50, 50)
    end
    
    print("TEAM CHECK: " .. (AimBot.TeamCheck and "ON" or "OFF"))
end)

-- ÿ≤ÿ± Wall Check
local WallButton = Instance.new("TextButton")
WallButton.Size = UDim2.new(0.9, 0, 0, 30)
WallButton.Position = UDim2.new(0.05, 0, 0.9, 0)
WallButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
WallButton.BorderSizePixel = 0
WallButton.Text = "WALL CHECK: ON"
WallButton.TextColor3 = Color3.fromRGB(0, 255, 100)
WallButton.TextSize = 12
WallButton.Font = Enum.Font.SourceSans
WallButton.Parent = MainFrame

WallButton.MouseButton1Click:Connect(function()
    AimBot.WallCheck = not AimBot.WallCheck
    
    if AimBot.WallCheck then
        WallButton.Text = "WALL CHECK: ON"
        WallButton.TextColor3 = Color3.fromRGB(0, 255, 100)
    else
        WallButton.Text = "WALL CHECK: OFF"
        WallButton.TextColor3 = Color3.fromRGB(255, 50, 50)
    end
    
    print("WALL CHECK: " .. (AimBot.WallCheck and "ON" or "OFF"))
end)

-- ÿ≤ÿ± ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÇÿßÿ¶ŸÖÿ©
local HideButton = Instance.new("TextButton")
HideButton.Size = UDim2.new(0, 30, 0, 30)
HideButton.Position = UDim2.new(1, -35, 0, 5)
HideButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
HideButton.BorderSizePixel = 0
HideButton.Text = "X"
HideButton.TextColor3 = Color3.fromRGB(255, 255, 255)
HideButton.TextSize = 16
HideButton.Font = Enum.Font.SourceSansBold
HideButton.Parent = MainFrame

HideButton.MouseButton1Click:Connect(function()
    ScreenGui.Enabled = not ScreenGui.Enabled
end)

-- ======== ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿäÿ© ========
-- ÿ¨ÿπŸÑ Frame ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ≥ÿ≠ÿ®
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and (input == dragInput) then
        update(input)
    end
end)

-- ======== ÿ®ÿØÿ° ÿßŸÑŸÜÿ∏ÿßŸÖ ========
print("========================================")
print("üéØ AIMBOT PRO SYSTEM LOADED!")
print("‚úÖ Auto Shoot: ENABLED")
print("üéØ Precision: HIGH")
print("üì± Mobile Compatible")
print("========================================")