print("PhantomXPro - Multilingual")

-- ØªØ­Ù…ÙŠÙ„ WindUI
local success, result = pcall(function()
    local source = game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua", true)
    if source then
        local loaded = loadstring(source)
        if loaded then
            return loaded()
        end
    end
    return nil
end)

if success and result then
    local WindUI = result
    local Players = game:GetService("Players")
    local Workspace = game:GetService("Workspace")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local player = Players.LocalPlayer

    -- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©
    local languageChoice = nil
    WindUI:Popup({
        Title = "PhantomXPro - Select Language",
        Icon = "globe",
        Content = "Please select script language",
        Buttons = {
            {
                Title = "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                Icon = "flag",
                Variant = "Primary",
                Callback = function()
                    languageChoice = "Arabic"
                end
            },
            {
                Title = "English",
                Icon = "flag",
                Variant = "Primary",
                Callback = function()
                    languageChoice = "English"
                end
            }
        }
    })

    repeat task.wait() until languageChoice ~= nil

    local texts = {
        Arabic = {
            mainTab = "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
            espOn = "ØªØ´ØºÙŠÙ„ ESP",
            espOff = "Ø¥ÙŠÙ‚Ø§Ù ESP",
            hitboxOn = "ØªØ´ØºÙŠÙ„ Hitbox",
            hitboxOff = "Ø¥ÙŠÙ‚Ø§Ù Hitbox",
            flight = "Ø§Ù„Ø·ÙŠØ±Ø§Ù†",
            selectEnemy = "Ø§Ø®ØªØ± Ø¹Ø¯Ùˆ",
            kill = "Ù‚ØªÙ„",
            refresh = "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡",
            discord = "Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯",
            close = "Ø¥ØºÙ„Ø§Ù‚",
            espActive = "ESP Ù…ÙØ¹Ù‘Ù„",
            espRemoved = "ESP Ù…ØªÙˆÙ‚Ù",
            hitboxActive = "Hitbox Ù…ÙØ¹Ù‘Ù„",
            hitboxRemoved = "Hitbox Ù…ØªÙˆÙ‚Ù",
            flightActive = "Ø§Ù„Ø·ÙŠØ±Ø§Ù† Ù…ÙØ¹Ù‘Ù„",
            noEnemies = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø¹Ø¯Ø§Ø¡",
            killed = "ØªÙ… Ø§Ù„Ù‚ØªÙ„",
            discordCopied = "ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯",
            scriptLoaded = "ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª",
            refreshComplete = "ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡",
            scriptClosed = "ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ÙƒØ±Ø¨Øª"
        },
        English = {
            mainTab = "Main",
            espOn = "ESP ON",
            espOff = "ESP OFF",
            hitboxOn = "Hitbox ON",
            hitboxOff = "Hitbox OFF",
            flight = "Flight",
            selectEnemy = "Select Enemy",
            kill = "Kill",
            refresh = "Refresh Enemies",
            discord = "Discord",
            close = "Close",
            espActive = "ESP Active",
            espRemoved = "ESP Removed",
            hitboxActive = "Hitbox Active",
            hitboxRemoved = "Hitbox Removed",
            flightActive = "Flight Active",
            noEnemies = "No enemies",
            killed = "Target Killed",
            discordCopied = "Discord link copied",
            scriptLoaded = "Script loaded",
            refreshComplete = "Enemies refreshed",
            scriptClosed = "Script closed"
        }
    }

    local t = texts[languageChoice]

    WindUI.TransparencyValue = 0.2
    WindUI:SetTheme("Dark")

    -- Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø©
    local Window = WindUI:CreateWindow({
        Title = "PhantomXPro",
        Icon = "shield",
        Author = "By Cypher",
        Folder = "PhantomXPro",
        Size = UDim2.fromOffset(500, 380),
        Theme = "Dark"
    })

    local MainSection = Window:Section({ Title = "PhantomXPro", Opened = true })
    local MainTab = MainSection:Tab({ Title = t.mainTab, Icon = "home" })

    -- =============================================
    -- Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
    -- =============================================
    local function getEnemiesSimple()
        local enemies = {}
        local allPlayers = Players:GetPlayers()
        
        for _, otherPlayer in pairs(allPlayers) do
            if otherPlayer ~= player then
                table.insert(enemies, otherPlayer)
            end
        end
        
        return enemies
    end

    local function updateEnemyList()
        local enemies = getEnemiesSimple()
        local enemyList = {"All Enemies"}
        
        for _, enemy in pairs(enemies) do
            table.insert(enemyList, enemy.Name)
        end
        
        return enemies, enemyList
    end

    -- =============================================
    -- Ù†Ø¸Ø§Ù… ESP
    -- =============================================
    local espObjects = {}
    local espConnections = {}
    local espActive = false

    local function cleanESP()
        for _, obj in pairs(espObjects) do
            if obj and obj.Parent then
                obj:Destroy()
            end
        end
        espObjects = {}
        
        for _, conn in pairs(espConnections) do
            if conn then
                conn:Disconnect()
            end
        end
        espConnections = {}
    end

    local function createESPForEnemy(enemyPlayer)
        if not enemyPlayer or enemyPlayer == player then return end
        
        local function createESP(char)
            if not char then return end
            
            -- Ø­Ø°Ù Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø£ÙˆÙ„Ø§Ù‹
            for i = #espObjects, 1, -1 do
                local obj = espObjects[i]
                if obj and obj.Name:find(enemyPlayer.Name) then
                    obj:Destroy()
                    table.remove(espObjects, i)
                end
            end
            
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if not hrp then return end
            
            -- Highlight
            local highlight = Instance.new("Highlight")
            highlight.Name = enemyPlayer.Name .. "_ESP"
            highlight.Adornee = char
            highlight.FillColor = Color3.fromRGB(255, 50, 50)
            highlight.FillTransparency = 0.3
            highlight.OutlineColor = Color3.fromRGB(255, 0, 0)
            highlight.OutlineTransparency = 0
            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            highlight.Parent = Workspace
            
            -- Name Tag
            local billboard = Instance.new("BillboardGui")
            billboard.Name = enemyPlayer.Name .. "_Name"
            billboard.Size = UDim2.new(0, 120, 0, 30)
            billboard.StudsOffset = Vector3.new(0, 3.5, 0)
            billboard.AlwaysOnTop = true
            billboard.Adornee = hrp
            billboard.Parent = Workspace
            
            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1, 0, 1, 0)
            label.BackgroundTransparency = 1
            label.Text = enemyPlayer.Name
            label.TextColor3 = Color3.fromRGB(255, 100, 100)
            label.TextSize = 14
            label.Font = Enum.Font.GothamBold
            label.TextStrokeTransparency = 0.3
            label.Parent = billboard
            
            -- ØªØ®Ø²ÙŠÙ†
            table.insert(espObjects, highlight)
            table.insert(espObjects, billboard)
            
            -- Ø¥Ø°Ø§ Ù…Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨
            local humanoid = char:FindFirstChild("Humanoid")
            if humanoid then
                local conn = humanoid.Died:Connect(function()
                    task.wait(2)
                    if highlight then highlight:Destroy() end
                    if billboard then billboard:Destroy() end
                end)
                table.insert(espConnections, conn)
            end
        end
        
        -- Ø¥Ù†Ø´Ø§Ø¡ ESP Ù„Ù„ÙƒØ§Ø±Ø§ÙƒØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
        if enemyPlayer.Character then
            createESP(enemyPlayer.Character)
        end
        
        -- Connect Ù„Ù„ÙƒØ§Ø±Ø§ÙƒØªØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯
        local conn = enemyPlayer.CharacterAdded:Connect(function(char)
            task.wait(0.5)
            createESP(char)
        end)
        table.insert(espConnections, conn)
        
        -- Ø¥Ø°Ø§ Ø®Ø±Ø¬ Ø§Ù„Ù„Ø§Ø¹Ø¨
        local conn2 = enemyPlayer.CharacterRemoving:Connect(function()
            for i = #espObjects, 1, -1 do
                local obj = espObjects[i]
                if obj and obj.Name:find(enemyPlayer.Name) then
                    obj:Destroy()
                    table.remove(espObjects, i)
                end
            end
        end)
        table.insert(espConnections, conn2)
    end

    local function applyESP()
        cleanESP()
        
        local enemies = getEnemiesSimple()
        local count = #enemies
        
        for _, enemy in pairs(enemies) do
            createESPForEnemy(enemy)
        end
        
        espActive = true
        
        Window:Notify({
            Title = "ESP",
            Content = t.espActive .. " (" .. count .. " " .. (languageChoice == "Arabic" and "Ø¹Ø¯Ùˆ" or "enemies") .. ")",
            Duration = 3
        })
        
        return count
    end

    local function removeESP()
        cleanESP()
        espActive = false
        
        Window:Notify({
            Title = "ESP",
            Content = t.espRemoved,
            Duration = 3
        })
    end

    -- =============================================
    -- Ù†Ø¸Ø§Ù… Hitbox
    -- =============================================
    local hitboxObjects = {}
    local hitboxActive = false

    local function resetHitbox(char)
        if char then
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if hrp and hrp:IsA("BasePart") then
                hrp.Size = Vector3.new(2, 1, 1)
                hrp.Transparency = 0
                hrp.CanCollide = true
                hrp.Color = Color3.fromRGB(255, 255, 255)
                hrp.Material = Enum.Material.Plastic
            end
        end
    end

    local function applyHitbox(char)
        if not char then return end
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end
        
        hrp.CanCollide = false
        hrp.Size = Vector3.new(25, 25, 25)
        hrp.Transparency = 0.7
        hrp.Color = Color3.fromRGB(255, 100, 100)
        hrp.Material = Enum.Material.Neon
        
        table.insert(hitboxObjects, {player = char.Parent, hrp = hrp})
    end

    local function applyHitboxes()
        -- ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù‚Ø¯ÙŠÙ…
        for _, data in pairs(hitboxObjects) do
            if data.hrp and data.hrp.Parent then
                resetHitbox(data.hrp.Parent)
            end
        end
        hitboxObjects = {}
        
        local enemies = getEnemiesSimple()
        local count = #enemies
        
        for _, enemy in pairs(enemies) do
            if enemy.Character then
                applyHitbox(enemy.Character)
            end
        end
        
        hitboxActive = true
        
        Window:Notify({
            Title = "Hitbox",
            Content = t.hitboxActive .. " (" .. count .. " " .. (languageChoice == "Arabic" and "Ø¹Ø¯Ùˆ" or "enemies") .. ")",
            Duration = 3
        })
        
        return count
    end

    local function removeHitboxes()
        for _, data in pairs(hitboxObjects) do
            if data.hrp and data.hrp.Parent then
                resetHitbox(data.hrp.Parent)
            end
        end
        hitboxObjects = {}
        hitboxActive = false
        
        Window:Notify({
            Title = "Hitbox",
            Content = t.hitboxRemoved,
            Duration = 3
        })
    end

    -- =============================================
    -- Ù†Ø¸Ø§Ù… Flight
    -- =============================================
    local flightActive = false

    local function applyFlight()
        loadstring(game:HttpGet("https://pastebin.com/raw/5WLxDDvL"))()
        flightActive = true
        
        Window:Notify({
            Title = "Flight",
            Content = t.flightActive,
            Duration = 3
        })
    end

    -- =============================================
    -- Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚ØªÙ„
    -- =============================================
    local selectedTarget = "All Enemies"
    local enemyList = {"All Enemies"}

    local function killTarget()
        if selectedTarget == "All Enemies" then
            local enemies = getEnemiesSimple()
            
            if #enemies == 0 then
                Window:Notify({
                    Title = "Kill",
                    Content = t.noEnemies,
                    Duration = 2
                })
                return
            end
            
            for _, enemy in pairs(enemies) do
                pcall(function()
                    ReplicatedStorage.KnifeKill:FireServer(enemy, enemy)
                end)
                task.wait(0.3)
            end
            
            Window:Notify({
                Title = "Kill",
                Content = t.killed .. " (" .. #enemies .. ")",
                Duration = 3
            })
        else
            local target = Players:FindFirstChild(selectedTarget)
            if target then
                pcall(function()
                    ReplicatedStorage.KnifeKill:FireServer(target, target)
                end)
                Window:Notify({
                    Title = "Kill",
                    Content = t.killed .. ": " .. target.Name,
                    Duration = 3
                })
            end
        end
    end

    -- =============================================
    -- ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
    -- =============================================
    local function refreshEnemyList()
        local enemies, newList = updateEnemyList()
        enemyList = newList
        
        -- ØªØ­Ø¯ÙŠØ« Dropdown
        local dropdown = MainTab:Get("enemyDropdown")
        if dropdown then
            dropdown:Set({Values = enemyList})
        end
        
        return #enemies
    end

    -- =============================================
    -- Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø©
    -- =============================================

    -- Ø²Ø± ESP
    MainTab:Button({
        Title = "ğŸ”´ " .. t.espOff,
        Icon = "eye",
        Size = "large",
        Callback = function()
            if espActive then
                removeESP()
                MainTab:Get("ESPButton"):Set({Title = "ğŸ”´ " .. t.espOff})
            else
                local count = applyESP()
                MainTab:Get("ESPButton"):Set({Title = "ğŸŸ¢ " .. t.espOn .. " (" .. count .. ")"})
            end
        end
    })

    -- Ø²Ø± Hitbox
    MainTab:Button({
        Title = "ğŸ”´ " .. t.hitboxOff,
        Icon = "target",
        Size = "large",
        Callback = function()
            if hitboxActive then
                removeHitboxes()
                MainTab:Get("HitboxButton"):Set({Title = "ğŸ”´ " .. t.hitboxOff})
            else
                local count = applyHitboxes()
                MainTab:Get("HitboxButton"):Set({Title = "ğŸŸ¢ " .. t.hitboxOn .. " (" .. count .. ")"})
            end
        end
    })

    -- Ø²Ø± Flight
    MainTab:Button({
        Title = "ğŸ›« " .. t.flight,
        Icon = "wind",
        Size = "large",
        Callback = function()
            if not flightActive then
                applyFlight()
                MainTab:Get("FlightButton"):Set({Title = "ğŸŸ¢ " .. t.flight})
            end
        end
    })

    -- Dropdown Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø¯Ùˆ
    MainTab:Dropdown({
        Title = "ğŸ¯ " .. t.selectEnemy,
        Icon = "users",
        Size = "large",
        Values = enemyList,
        Callback = function(value)
            selectedTarget = value
        end
    })

    -- Ø²Ø± Ø§Ù„Ù‚ØªÙ„
    MainTab:Button({
        Title = "ğŸ’€ " .. t.kill,
        Icon = "skull",
        Size = "large",
        Variant = "Destructive",
        Callback = function()
            killTarget()
        end
    })

    -- Ø²Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
    MainTab:Button({
        Title = "ğŸ”„ " .. t.refresh,
        Icon = "refresh-cw",
        Size = "large",
        Callback = function()
            local count = refreshEnemyList()
            Window:Notify({
                Title = "Refresh",
                Content = t.refreshComplete .. " (" .. count .. ")",
                Duration = 3
            })
        end
    })

    -- Ø²Ø± Discord
    MainTab:Button({
        Title = "ğŸ’¬ " .. t.discord,
        Icon = "message-circle",
        Size = "large",
        Callback = function()
            setclipboard("https://discord.gg/CgUa36sPNs")
            Window:Notify({
                Title = "Discord",
                Content = t.discordCopied,
                Duration = 3
            })
        end
    })

    -- Ø²Ø± Ø¥ØºÙ„Ø§Ù‚
    MainTab:Button({
        Title = "â¹ï¸ " .. t.close,
        Icon = "power",
        Size = "large",
        Variant = "Destructive",
        Callback = function()
            cleanESP()
            removeHitboxes()
            Window:Destroy()
            Window:Notify({
                Title = "Close",
                Content = t.scriptClosed,
                Duration = 2
            })
        end
    })

    -- =============================================
    -- ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ
    -- =============================================
    Players.PlayerAdded:Connect(function()
        task.wait(1)
        refreshEnemyList()
        
        if espActive then
            local enemies = getEnemiesSimple()
            for _, enemy in pairs(enemies) do
                if enemy then
                    createESPForEnemy(enemy)
                end
            end
        end
    end)

    Players.PlayerRemoving:Connect(function(leavingPlayer)
        if espActive then
            for i = #espObjects, 1, -1 do
                local obj = espObjects[i]
                if obj and obj.Name:find(leavingPlayer.Name) then
                    obj:Destroy()
                    table.remove(espObjects, i)
                end
            end
        end
        
        task.wait(0.5)
        refreshEnemyList()
    end)

    -- =============================================
    -- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ´ØºÙŠÙ„
    -- =============================================
    task.wait(1)
    
    -- ØªØ­Ø¯ÙŠØ« Ø£ÙˆÙ„ÙŠ
    local initialCount = refreshEnemyList()
    
    -- Ø¥Ø´Ø¹Ø§Ø±
    Window:Notify({
        Title = "PhantomXPro",
        Content = t.scriptLoaded .. " (" .. initialCount .. " " .. (languageChoice == "Arabic" and "Ù„Ø§Ø¹Ø¨" or "players") .. ")",
        Duration = 4
    })

else
    print("Failed to load WindUI")
end